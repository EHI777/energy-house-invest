<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Energy House Invest - nowoczesne i ekologiczne inwestycje deweloperskie. Zainwestuj w przyszłość z nami!" />
  <title>Energy House Invest - Nowoczesne Inwestycje</title>

  <!-- CSS -->
  <link rel="stylesheet" href="styles.css?v=6" />

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-9Q82C01SPH');
  </script>
  <!-- /GA -->
</head>
<body>
  <!-- Header -->
  <header class="site-header">
    <div class="logo">
      <img src="logo-white.png" alt="Energy House Invest Logo" />
      <!-- usunięto dodatkowy napis przy logo -->
    </div>
    <nav class="main-nav">
      <a href="#home">Strona Główna</a>
      <a href="#about">O Nas</a>
      <a href="#projects">Inwestycje</a>
      <a href="#pricing">Cennik</a>
      <a href="#contact">Kontakt</a>
    </nav>
  </header>

  <!-- Hero -->
  <section id="home" class="hero">
    <div class="hero-content">
      <h1>Komfort i Nowoczesność w Każdym Detalu</h1>
      <p>Nowoczesne, energooszczędne i funkcjonalne projekty, stworzone z myślą o Twoim komforcie.</p>
      <a href="#projects" class="btn btn-primary">Zobacz Nasze Projekty</a>
    </div>
  </section>

  <!-- About -->
  <section id="about" class="container">
    <h2>O Nas</h2>
    <div class="about-content">
      <p>Komfort i nowoczesność w każdym detalu – to filozofia, która przyświeca nam od ponad 20 lat. Jako doświadczony deweloper i inwestor na rynku nieruchomości, tworzymy przestrzenie, które łączą wygodę, funkcjonalność i nowoczesny design.</p>
      <p>Specjalizujemy się w budowie domów i mieszkań w spokojnych, podmiejskich lokalizacjach, zapewniających prywatność, harmonię z naturą oraz łatwy dostęp do miejskich udogodnień. Oferujemy zarówno nowe inwestycje, jak i kompleksowo wyremontowane, gotowe do zamieszkania nieruchomości.</p>
      <ul class="about-highlights">
        <li>🔹 Ponad 20 lat doświadczenia</li>
        <li>🔹 Nowoczesne i komfortowe nieruchomości</li>
        <li>🔹 Spokojne lokalizacje blisko natury i miasta</li>
        <li>🔹 Gotowe do zamieszkania domy i mieszkania</li>
      </ul>
      <p>Z Energy House Invest znajdziesz przestrzeń dopasowaną do swoich potrzeb. Twój komfort to nasza misja.</p>
    </div>
  </section>

  <!-- Projects -->
  <section id="projects" class="container">
    <h2>Nasze Inwestycje</h2>
    <div class="grid projects">
      <article class="project">
        <img src="projekt 1.jpg" alt="Dolna – kameralna inwestycja domów w zabudowie bliźniaczej" />
        <h3>Dolna – kameralna inwestycja</h3>
        <p>Funkcjonalne domy w zabudowie bliźniaczej, idealne dla rodzin szukających prywatności i spokoju.</p>
      </article>
      <article class="project">
        <img src="projekt 2.jpg" alt="Osiedle Trzy Perły" />
        <h3>Osiedle Trzy Perły</h3>
        <p>Nowoczesne osiedle w spokojnej lokalizacji, łączące komfort i przestronność z bliskością natury.</p>
      </article>
      <article class="project">
        <img src="projekt 3.jpg" alt="Wnętrza" />
        <h3>Wnętrza</h3>
        <p>Nowoczesne, minimalistyczne, czyste i spójne.</p>
      </article>
    </div>
  </section>

  <!-- Pricing -->
  <section id="pricing" class="container">
    <h2>Cennik</h2>
    <p class="muted">Ceny brutto (z VAT). Dane aktualizowane wraz ze zmianami w pliku CSV.</p>

    <div class="toolbar">
      <label for="status-filter">Filtr statusu:</label>
      <select id="status-filter">
        <option value="all">Wszystkie</option>
        <option value="dostępny">Dostępne</option>
        <option value="rezerwacja">Rezerwacja</option>
        <option value="sprzedany">Sprzedane</option>
      </select>

      <a class="btn btn-ghost" href="cennik_trzy_perly.csv" download>⬇️ Pobierz CSV</a>
    </div>

    <div class="cennik-wrap">
      <table id="pricing-table">
        <thead></thead>
        <tbody>
          <tr><td style="padding:12px">Wczytywanie…</td></tr>
        </tbody>
      </table>
    </div>

    <p class="note">* Kolumna „Historia zmian ceny” pokazuje oficjalne zmiany cen ofertowych (promocje, podwyżki, obniżki). Dla pozycji bez zmian – „brak”.</p>
  </section>

  <!-- Realizations -->
  <section id="realizations" class="container">
    <h2>Nasze Realizacje</h2>
    <div class="grid realizations">
      <article class="realization"><img src="realization1.jpg" alt="Realizacja 1" /><h3>Realizacja 1</h3></article>
      <article class="realization"><img src="realization2.jpg" alt="Realizacja 2" /><h3>Realizacja 2</h3></article>
      <article class="realization"><img src="realization3.jpg" alt="Realizacja 3" /><h3>Realizacja 3</h3></article>
      <article class="realization"><img src="realization4.jpg" alt="Realizacja 4" /><h3>Realizacja 4</h3></article>
      <article class="realization"><img src="realization5.jpg" alt="Realizacja 5" /><h3>Realizacja 5</h3></article>
      <article class="realization"><img src="realization6.jpg" alt="Realizacja 6" /><h3>Realizacja 6</h3></article>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="container">
    <h2>Kontakt</h2>
    <div class="contact-content">
      <form action="#" method="POST" class="contact-form">
        <label for="name">Imię i Nazwisko</label>
        <input type="text" id="name" name="name" required />

        <label for="email">Email</label>
        <input type="email" id="email" name="email" required />

        <label for="message">Wiadomość</label>
        <textarea id="message" name="message" rows="5" required></textarea>

        <button type="submit" class="btn btn-primary">Wyślij</button>
      </form>
      <div class="contact-info">
        <p><strong>Email:</strong> biuro@energyhouseinvest.pl</p>
        <p><strong>Telefon:</strong> +48 605 721 464</p>
        <p><strong>Adres:</strong> ul. Kolejowa 1, 59-150 Grębocice</p>
        <p><strong>Bądź na bieżąco:</strong></p>
        <div class="social-links">
          <a href="https://www.facebook.com/energyhouseinvest/" target="_blank" rel="noopener">Facebook</a>
          <a href="https://www.tiktok.com/@energy.house.inve?is_from_webapp=1&sender_device=pc" target="_blank" rel="noopener">TikTok</a>
          <a href="https://www.instagram.com/energyhouseinvest/" target="_blank" rel="noopener">Instagram</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Badge -->
  <div class="orly-logo">
    <a href="https://www.orlynieruchomosci.pl/profile-480893-energy-house-invest" target="_blank" rel="noopener">
      <img src="https://www.orlynieruchomosci.pl/images/medals/480893/laureat300_gold_2_pl.png"
           alt="Energy HOUSE Invest - Grębocice"
           title="Energy HOUSE Invest - Grębocice" />
    </a>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <p>&copy; 2025 Energy House Invest. Wszystkie prawa zastrzeżone.</p>
  </footer>

  <!-- JS -->
  <script>
    // Prosty „reveal on scroll”
    document.addEventListener("DOMContentLoaded", function () {
      function revealSections() {
        document.querySelectorAll("#projects, #contact, .hero, #pricing").forEach((section) => {
          const t = section.getBoundingClientRect().top;
          if (t < window.innerHeight - 50) section.classList.add("show");
        });
      }
      window.addEventListener("scroll", revealSections);
      revealSections();
    });

    // ===== CENNIK: CSV -> tabela (z filtrami i estetyką) =====
    (function() {
      const CSV_URL = 'cennik_trzy_perly.csv?v=' + Date.now();
      const table   = document.getElementById("pricing-table");
      const thead   = table.querySelector("thead");
      const tbody   = table.querySelector("tbody");
      const filter  = document.getElementById("status-filter");

      function parseCSV(text){
        const lines = text.replace(/\r/g,'').split('\n').filter(l=>l.trim().length);
        return lines.map(line => {
          // parser CSV ze średnikiem i cudzysłowami
          const raw = [];
          let cur = '', inQ = false;
          for (let i=0;i<line.length;i++){
            const ch = line[i], next = line[i+1];
            if (ch === '"'){
              if (inQ && next === '"'){ cur += '"'; i++; }
              else inQ = !inQ;
            } else if (ch === ';' && !inQ){
              raw.push(cur); cur = '';
            } else {
              cur += ch;
            }
          }
          raw.push(cur);
          return raw.map(c => c.trim());
        });
      }

      // Formatery PL
      const PLN = v => {
        const n = Number(v);
        if (!isFinite(n)) return v || '—';
        return new Intl.NumberFormat('pl-PL', { style:'currency', currency:'PLN', maximumFractionDigits:2 }).format(n);
      };
      const NUM = v => {
        const n = Number(v);
        if (!isFinite(n)) return v || '—';
        return new Intl.NumberFormat('pl-PL', { maximumFractionDigits:2 }).format(n);
      };

      function badge(statusRaw){
        const s = (statusRaw||'').toLowerCase();
        if (s.includes('dostępny'))  return `<span class="status dostepny">dostępny</span>`;
        if (s.includes('rezerw'))    return `<span class="status rezerwacja">rezerwacja</span>`;
        if (s.includes('sprzed'))    return `<span class="status sprzedany">sprzedany</span>`;
        return statusRaw || '—';
      }

      function isNumericHeader(h){
        const x = (h||'').toLowerCase();
        return x.includes('powierz') || x.includes('cena/m') || x.includes('cena brutto');
      }

      let HEADERS = [], ALL_ROWS = [];

      function render(rows){
        thead.innerHTML = `<tr>${HEADERS.map(h=>`<th>${h}</th>`).join('')}</tr>`;

        const idxStatus  = HEADERS.findIndex(h=> (h||'').toLowerCase().includes('status'));
        const idxHistory = HEADERS.findIndex(h=> (h||'').toLowerCase().includes('historia'));
        const numericIdx = HEADERS
          .map((h,i)=> [i, isNumericHeader(h)])
          .filter(([_,isNum])=>isNum)
          .map(([i])=>i);

        tbody.innerHTML = rows.map(row=>{
          return `<tr>${
            row.map((cell,i)=>{
              let c = (cell||'').replace(/^"(.*)"$/,'$1').replace(/""/g,'"').trim();
              if (i === idxStatus)  return `<td>${badge(c)}</td>`;
              if (i === idxHistory) return `<td class="hist">${c || 'brak'}</td>`;
              if (numericIdx.includes(i)) {
                const h = (HEADERS[i]||'').toLowerCase();
                if (h.includes('cena brutto')) return `<td class="num">${PLN(c)}</td>`;
                if (h.includes('cena/m'))      return `<td class="num">${NUM(c)}</td>`;
                if (h.includes('powierz'))     return `<td class="num">${NUM(c)}</td>`;
              }
              return `<td>${c || '—'}</td>`;
            }).join('')
          }</tr>`;
        }).join('');
      }

      function applyFilter(){
        const val = (filter.value||'all').toLowerCase();
        if (val === 'all') return render(ALL_ROWS);
        const idxStatus  = HEADERS.findIndex(h=> (h||'').toLowerCase().includes('status'));
        const filtered = ALL_ROWS.filter(r => ((r[idxStatus]||'').toLowerCase().includes(val)));
        render(filtered);
      }

      fetch(CSV_URL, { cache:'no-store' })
        .then(r => { if(!r.ok) throw new Error('HTTP '+r.status); return r.text(); })
        .then(text => {
          let rows = parseCSV(text);
          if (!rows.length) throw new Error('Pusty plik CSV');

          // 🔧 Pomiń nagłówek-tytuł, jeśli jest jako pierwszy wiersz
          const nonEmptyCount = arr => arr.filter(c => (c||'').trim().length > 0).length;
          const looksLikeHeaders = arr => {
            const s = arr.join(' ').toLowerCase();
            return s.includes('etap') || s.includes('lokal') || s.includes('typ') || s.includes('cena');
          };
          if (nonEmptyCount(rows[0]) === 1 && rows.length > 1) rows = rows.slice(1);
          if (!looksLikeHeaders(rows[0]) && rows.length > 1)   rows = rows.slice(1);

          HEADERS = rows[0];
          ALL_ROWS = rows.slice(1);
          render(ALL_ROWS);
          filter.addEventListener('change', applyFilter);
        })
        .catch(err => {
          console.error('Błąd wczytywania cennika:', err);
          thead.innerHTML = '';
          tbody.innerHTML = `<tr><td style="padding:12px;color:#a00">Nie udało się wczytać cennika.</td></tr>`;
        });
    })();
  </script>
</body>
</html>
